<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Test de servicios</title>
<link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script type="text/javascript">

jQuery(document).ready(function() {
	// Standard
	jQuery('.tabs.standard .tab-links a').on('click', function(e)  {
		var currentAttrValue = jQuery(this).attr('href');

		// Show/Hide Tabs
		jQuery('.tabs ' + currentAttrValue).show().siblings().hide();

		// Change/remove current tab to active
		jQuery(this).parent('li').addClass('active').siblings().removeClass('active');

		e.preventDefault();
	});

	// Animated Fade
	jQuery('.tabs.animated-fade .tab-links a').on('click', function(e)  {
		var currentAttrValue = jQuery(this).attr('href');

		// Show/Hide Tabs
		jQuery('.tabs ' + currentAttrValue).fadeIn(400).siblings().hide();

		// Change/remove current tab to active
		jQuery(this).parent('li').addClass('active').siblings().removeClass('active');

		e.preventDefault();
	});

	// Animated Slide 1
	jQuery('.tabs.animated-slide-1 .tab-links a').on('click', function(e)  {
		var currentAttrValue = jQuery(this).attr('href');

		// Show/Hide Tabs
		jQuery('.tabs ' + currentAttrValue).siblings().slideUp(400);
		jQuery('.tabs ' + currentAttrValue).delay(400).slideDown(400);

		// Change/remove current tab to active
		jQuery(this).parent('li').addClass('active').siblings().removeClass('active');

		e.preventDefault();
	});

	// Animated Slide 2
	jQuery('.tabs.animated-slide-2 .tab-links a').on('click', function(e)  {
		var currentAttrValue = jQuery(this).attr('href');

		// Show/Hide Tabs
		jQuery('.tabs ' + currentAttrValue).slideDown(400).siblings().slideUp(400);

		// Change/remove current tab to active
		jQuery(this).parent('li').addClass('active').siblings().removeClass('active');

		e.preventDefault();
	});
});
//--------------------------------------------------------------------------------
    function jack(){
        var results = $.ajax({
            url : '/rest_accreditation-0.0.1-SNAPSHOT/webServExpertos/oauth/token',
            type : 'POST',
            data : {
                grant_type : 'client_credentials',
            },
            headers: {
                "Authorization": "Basic Y2xpZW50RXhwZXJ0b3M6YzNueDN4OTNydDA1"
            },
            dataType: "json",
            success: function(response) {
                console.log(response.access_token);
                
                $('#token').val(response.access_token);
            },
            error: function(response) {
                console.log(response.access_token);
                
                $('#token').val(response.access_token);
            }
        });
    }

    function ConsultaVisitantes(){
        var token= $('#token').val();
        var doc= $('#docVis').val();
        var nombres= $('#nombVis').val();
        var apellidos= $('#apelliVis').val();
        var ubicacion= $('#ubiVis').val().toUpperCase();

        var results = $.ajax({
            url : '/rest_accreditation-0.0.1-SNAPSHOT/webServExpertos/visitantes/getDatosVisitantes',
            type : 'POST',
            data : {
                doc : doc,
                nombres : nombres,
                apellidos : apellidos,
                ubicacion : ubicacion,
            },
            headers: {
                "Authorization": "Bearer "+token
            },
            dataType: "json",
            success: function(response) {
                $("#responseVisitantes").val( JSON.stringify(response, null, 4));
            },
            error: function(error){
                console.log(error);
            }
        });
    }

</script>
</head>
<body>

<div class="main">
    <h2>Pagina de Pruebas de Servicios</h2>
    <div>
        <p>
            <input type="button" class="btn btn-default" id="reset" name="reset"  value="Obtener token" onclick="jack()"/>
        </p>
        <p>
            <textarea rows="4" cols="50" id="token"></textarea>
        </p>
    </div>
    <div class="tabs standard">
        <ul class="tab-links">
            <li class="active">
                <a href="#tab13">Datos Visitantes</a>
            </li>
        </ul>
        <div class="tab-content">
            <div id="tab13" class="tab active">
                <p>Documento: <input type="text" id="docVis"></p>
                <p>Nombres: <input type="text" id="nombVis"></p>
                <p>Apellidos: <input type="text" id="apelliVis"></p>
                <p>Ubicacion: <input type="text" id="ubiVis"></p>
                <p><input type="button" class="btn btn-default" id="consulVisitantes" name="consulVisitantes" value="Consultar" onclick="ConsultaVisitantes()"/></p>
                <p><textarea rows="80" cols="50" id="responseVisitantes"></textarea></p>
            </div>
        </div>
    </div>
</div>

</body>
</html>
